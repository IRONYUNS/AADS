
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>subscribe</title><meta name="generator" content="MATLAB 9.2"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2017-08-15"><meta name="DC.source" content="docsubscribe.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>subscribe</h1><!--introduction--><p>Subscribe to MQTT topic</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Syntax</a></li><li><a href="#2">Description</a></li><li><a href="#3">Examples</a></li><li><a href="#8">Input Arguments</a></li><li><a href="#9">Name-Value Pair Arguments</a></li><li><a href="#11">Object Functions</a></li><li><a href="#12">Output Arguments</a></li><li><a href="#13">See Also</a></li></ul></div><h2 id="1">Syntax</h2><p><tt>S = subscribe(mqtt,'topic')</tt></p><p><tt>S = subscribe(mqtt,'topic',Name,Value)</tt></p><h2 id="2">Description</h2><p><tt>S = subscribe(mqtt,'topic')</tt> subscribes to <tt>'topic'</tt> using MQTT connection mqtt.</p><p><tt>S = subscribe(_,Name,Value)</tt> uses additional options specified by one or more Name, Value pair arguments.</p><h2 id="3">Examples</h2><p>Subscribe to IOTTopic on Mosquitto Broker</p><pre class="codeinput"><span class="comment">%Create Mqtt connection</span>
myMQTT=mqtt(<span class="string">'tcp://mosquitto.org'</span>);

<span class="comment">%Subscribe to a topic</span>
mySub = subscribe(myMQTT,<span class="string">'IoTTopic'</span>);
</pre><p>Subscribe to All Subcategories of Topic 'Building1'</p><p>Use the <tt>*</tt> symbol in the topic to subscribe to all topics. Using the subscription below, any messages sent to topics beginning with 'Building1' will be recieved. For example, this subscription will recieve messages published to 'Building1/temperature' and 'Building1/elevator'.</p><pre class="codeinput"><span class="comment">%Create Mqtt connection</span>
myMQTT=mqtt(<span class="string">'tcp://mosquitto.org'</span>);
<span class="comment">%Subscribe to a topic with multi-level wild card.</span>
mySub = subscribe(myMQTT,<span class="string">'Building1/#'</span>);
</pre><p>Subscribe to Multiple Topics with Single Level Wildcard</p><p>Use the <tt>+</tt> symbol in the topic to subscribe to all topics on a particular level. For example a subscription to the topic '/Building2/+/humidity' will recive messages sent to the topic '/Building2/lowerFloor/humidity' and 'Building2/upperFloor/humidity'.</p><pre class="codeinput"><span class="comment">%Create Mqtt connection</span>
myMQTT=mqtt(<span class="string">'tcp://mosquitto.org'</span>);
<span class="comment">%Subscribe to a topic with single-level wild card.</span>
mySub = subscribe(myMQTT,<span class="string">'Building2/+/humidity'</span>);
</pre><p>Subscribe to Topic with Callback Function</p><pre class="codeinput"><span class="comment">%Create Mqtt connection</span>
myMQTT=mqtt(<span class="string">'tcp://mosquitto.org'</span>);
<span class="comment">%Subscribe to a topic</span>
mySub = subscribe(myMQTT,<span class="string">'topic'</span>, <span class="string">'Callback'</span>,<span class="string">'@showmessage'</span>);

<span class="comment">%Callback function that displays the topic and message each time a new message is received.</span>
 <span class="keyword">function</span> showMessage(topic,data)
 disp(topic);
 disp(data);
 <span class="keyword">end</span>
</pre><h2 id="8">Input Arguments</h2><p><tt>mqtt</tt> - Input MQTT connection, specified as a the mqtt object used to publish</p><p><tt>topic</tt> - MQTT topic specified as a string or character array.</p><h2 id="9">Name-Value Pair Arguments</h2><p>Specify optional comma-separated pairs of <tt>Name,Value</tt> arguments. <tt>Name</tt> is the argument name and <tt>Value</tt> is the corresponding value. <tt>Name</tt> must appear inside single quotes (' '). You can specify several name and value pair arguments in any order as <tt>Name1,Value1,...,NameN,ValueN</tt> .</p><p>Use <tt>Name,Value</tt> arguments to specify parameter initial values and additional properties of <tt>subscribe</tt> function during model creation.</p><p>
<table cellpadding="4" cellspacing="0" width="100%">
	<tbody>
      <tr valign="top">
          <td><p><tt>'callback'</tt></p></td>
          <td><p>Callback function to execute, specified as a comma-separated pair consisting of 'Callback' and a function handle or the name of the function.  The function is executed when a message is received on the topic subscribed to. The function is called with two inputs (topic, data) in the same order.</p>
      </tr>
       <tr valign="top">
          <td><p><tt>'QoS'</tt></p></td>
          <td><p>Quality of Service (QoS) parameter, consisting of the comma-separated pair <tt>'QoS'</tt> and an integer value. (0) indicates messages will be delivered at most once, (1) at least once, (2) exactly once.  The dafualt value is 0. </p><p><b>Example: </b><tt>mySub = subscribe(myMMQTT,'myTopic','QoS',1);</tt></p></td>
      </tr>
       <tr valign="top">
          <td><p><tt>'Timeout'</tt></p></td>
          <td><p>Wait time in seconds to wait for subscription acknowledgement from broker, consisting of the comma-separated pair <tt>'Timeout'</tt> and an integer value.</p><p><b>Example: </b><tt>mySub = subscribe(myMQTT,'myTopic','Timeout',10)</tt></p></td>
      </tr>
  </tbody>
</table>
</p><h2 id="11">Object Functions</h2><p><tt>mqtt</tt> object functions include:</p><p>
<table cellpadding="1" cellspacing="0" width="100%">
	<tbody>
      <tr valign="top">
          <td><p><tt><a href="docread.html">read</a></tt></p></td>
          <td><p>Read most recent message in a subscription</p></td>
      </tr>
      <tr valign="top">
          <td><p><tt><a href="docreadall.html">readall</a></tt></p></td>
          <td><p>Read all messages in a subscription.</p></td>
      </tr>
      <tr valign="top">
          <td><p><tt><a href="docunsubscribe.html">unsubscribe</a></tt></p></td>
          <td><p>Cancel a subscription.</p></td>
      </tr>
  </tbody>
</table>
</p><h2 id="12">Output Arguments</h2><p><tt>subscription</tt> object. After creating the <tt>subscription</tt> object, you can use dot notation to access or change its property values.</p><pre class="codeinput">mySub = subscribe(myMQTT, <span class="string">'myTopic'</span>)

 mySub= MqttSubscription with <span class="string">properties:</span>
        Topic: <span class="string">'myTopic'</span>
 MessageCount: 0
      Timeout: 0.02000
          QoS: 0
    Connected: 1
</pre><h2 id="13">See Also</h2><p>|<a href="docMQTT.html">mqtt</a> | <a href="docpublish.html">publish</a> | <a href="docread.html">read</a> | <a href="docreadall.html">readall</a> | <a href="docunsubscribe.html">unsubscribe</a></p><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2017a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% subscribe
% Subscribe to MQTT topic
%% Syntax
% |S = subscribe(mqtt,'topic')|
%
% |S = subscribe(mqtt,'topic',Name,Value)|
%% Description
% |S = subscribe(mqtt,'topic')| subscribes to |'topic'| using MQTT connection mqtt.
%
% |S = subscribe(___,Name,Value)| uses additional options
% specified by one or more Name, Value pair arguments.
%% Examples
% 
%%
% Subscribe to IOTTopic on Mosquitto Broker
%
%Create Mqtt connection
myMQTT=mqtt('tcp://mosquitto.org');

%Subscribe to a topic
mySub = subscribe(myMQTT,'IoTTopic');

%%
% Subscribe to All Subcategories of Topic 'Building1'
%
% Use the |*| symbol in the topic to subscribe to all topics. 
% Using the subscription below, any messages sent to topics beginning with 'Building1' will be recieved.
% For example, this subscription will recieve messages published to 'Building1/temperature' and 'Building1/elevator'.

%Create Mqtt connection
myMQTT=mqtt('tcp://mosquitto.org');
%Subscribe to a topic with multi-level wild card.
mySub = subscribe(myMQTT,'Building1/#');

%%
% Subscribe to Multiple Topics with Single Level Wildcard
%
% Use the |+| symbol in the topic to subscribe to all topics on a particular level. 
% For example a subscription to the topic '/Building2/+/humidity' will recive messages sent to the topic
% '/Building2/lowerFloor/humidity' and 'Building2/upperFloor/humidity'. 
%
%Create Mqtt connection
myMQTT=mqtt('tcp://mosquitto.org');
%Subscribe to a topic with single-level wild card.
mySub = subscribe(myMQTT,'Building2/+/humidity');
%%
% Subscribe to Topic with Callback Function

%Create Mqtt connection
myMQTT=mqtt('tcp://mosquitto.org');
%Subscribe to a topic
mySub = subscribe(myMQTT,'topic', 'Callback','@showmessage');

%Callback function that displays the topic and message each time a new message is received.
 function showMessage(topic,data)
 disp(topic);
 disp(data);
 end
 

%% Input Arguments
% |mqtt| - Input MQTT connection, specified as a the mqtt object used to
% publish
%
% |topic| - MQTT topic specified as a string or character array. 
%% Name-Value Pair Arguments
% Specify optional comma-separated pairs of |Name,Value| arguments. |Name| is the argument name and |Value| is the corresponding value. |Name| must appear inside single quotes (' '). You can specify several name and value pair arguments in any order as |Name1,Value1,...,NameN,ValueN| .
%
% Use |Name,Value| arguments to specify parameter initial values and additional properties of |subscribe| function during model creation.
%%
% <html>
% <table cellpadding="4" cellspacing="0" width="100%">
% 	<tbody>
%       <tr valign="top">
%           <td><p><tt>'callback'</tt></p></td>
%           <td><p>Callback function to execute, specified as a comma-separated pair consisting of 'Callback' and a function handle or the name of the function.  The function is executed when a message is received on the topic subscribed to. The function is called with two inputs (topic, data) in the same order.</p>
%       </tr>
%        <tr valign="top">
%           <td><p><tt>'QoS'</tt></p></td>
%           <td><p>Quality of Service (QoS) parameter, consisting of the comma-separated pair <tt>'QoS'</tt> and an integer value. (0) indicates messages will be delivered at most once, (1) at least once, (2) exactly once.  The dafualt value is 0. </p><p><b>Example: </b><tt>mySub = subscribe(myMMQTT,'myTopic','QoS',1);</tt></p></td>
%       </tr>
%        <tr valign="top">
%           <td><p><tt>'Timeout'</tt></p></td>
%           <td><p>Wait time in seconds to wait for subscription acknowledgement from broker, consisting of the comma-separated pair <tt>'Timeout'</tt> and an integer value.</p><p><b>Example: </b><tt>mySub = subscribe(myMQTT,'myTopic','Timeout',10)</tt></p></td>
%       </tr>
%   </tbody>
% </table>
% </html>
%% Object Functions
% |mqtt| object functions include:
%
% <html>
% <table cellpadding="1" cellspacing="0" width="100%">
% 	<tbody>
%       <tr valign="top">
%           <td><p><tt><a href="docread.html">read</a></tt></p></td>
%           <td><p>Read most recent message in a subscription</p></td>
%       </tr>
%       <tr valign="top">
%           <td><p><tt><a href="docreadall.html">readall</a></tt></p></td>
%           <td><p>Read all messages in a subscription.</p></td>
%       </tr>
%       <tr valign="top">
%           <td><p><tt><a href="docunsubscribe.html">unsubscribe</a></tt></p></td>
%           <td><p>Cancel a subscription.</p></td>
%       </tr>
%   </tbody>  
% </table>
% </html>

%% Output Arguments
% |subscription|
% object. After creating the |subscription| object, you can use dot notation to access or change its property values. 
mySub = subscribe(myMQTT, 'myTopic')

 mySub= MqttSubscription with properties:
        Topic: 'myTopic'
 MessageCount: 0
      Timeout: 0.02000
          QoS: 0
    Connected: 1

%% See Also
%%
% |<docMQTT.html mqtt> | <docpublish.html publish> | <docread.html
% read> | <docreadall.html readall> | <docunsubscribe.html unsubscribe> 
##### SOURCE END #####
--></body></html>